databaseChangeLog:
  - changeSet:
      id: create_team_management_account_profile_table
      author: Vladyslav Shtaiier
      changes:
        - createTable:
            schemaName: team_management
            tableName: account_profile
            columns:
              - column:
                  name: id
                  type: integer
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    primaryKeyName: pk_account_profile
                    nullable: false
              - column:
                  name: first_name
                  type: varchar(75)
                  constraints:
                    nullable: false
              - column:
                  name: last_name
                  type: varchar(75)
                  constraints:
                    nullable: false
              - column:
                  name: middle_name
                  type: varchar(75)
                  constraints:
                    nullable: false

  - changeSet:
      id: add_columns_to_account_profile_table
      author: DenysLeonenko
      changes:
        - addColumn:
            schemaName: team_management
            tableName: account_profile
            columns:
              - column:
                  name: email
                  type: varchar(75)
                  constraints:
                    nullable: false
              - column:
                  name: avatar
                  type: varchar(75)
                  constraints:
                    nullable: false
              - column:
                  name: password
                  type: varchar(100)
                  constraints:
                    nullable: false
              - column:
                  name: account_role
                  type: varchar(14)
                  constraints:
                    nullable: false
              - column:
                  name: registration_date
                  type: datetime
              - column:
                  name: last_role_update_date
                  type: datetime

  - changeSet:
      id: create_department_table
      author: DenysLeonenko
      changes:
        - createTable:
            schemaName: team_management
            tableName: department
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: name
                  type: varchar(255)
                  constraints:
                    nullable: false

  - changeSet:
      id: create_specialty_table
      author: DenysLeonenko
      changes:
        - createTable:
            schemaName: team_management
            tableName: specialty
            columns:
              - column:
                  name: code_name
                  type: double
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: name
                  type: varchar(255)
                  constraints:
                    nullable: false

  - changeSet:
      id: add_department_id_and_specialty_code_number_columns
      author: DenysLeonenko
      changes:
        - addColumn:
            schemaName: team_management
            tableName: account_profile
            columns:
              - column:
                  name: department_id
                  type: uuid
                  constraints:
                    nullable: false
              - column:
                  name: specialty_code_name
                  type: double
                  constraints:
                    nullable: false

  - changeSet:
      id: create_account_department_table
      author: DenysLeonenko
      changes:
        - createTable:
            schemaName: team_management
            tableName: account_department
            columns:
              - column:
                  name: account_id
                  type: integer
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: department_id
                  type: uuid
                  constraints:
                    nullable: false

  - changeSet:
      id: create_account_specialty_table
      author: DenysLeonenko
      changes:
        - createTable:
            schemaName: team_management
            tableName: account_specialty
            columns:
              - column:
                  name: account_id
                  type: integer
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: specialty_id
                  type: double
                  constraints:
                    nullable: false

  - changeSet:
      id: create_departments_specialties_table
      author: DenysLeonenko
      changes:
        - createTable:
            schemaName: team_management
            tableName: departments_specialties
            columns:
              - column:
                  name: specialties_id
                  type: double
                  constraints:
                    nullable: false
              - column:
                  name: departments_id
                  type: uuid
                  constraints:
                    nullable: false

  - changeSet:
      id: add_primary_and_foreign_keys_to_department_specialties_table
      author: DenysLeonenko
      changes:
        - addPrimaryKey:
            tableName: departments_specialties
            schemaName: team_management
            columnNames: departments_id, specialties_id
            constraintName: pk_departments_id_specialties_id
        - addForeignKeyConstraint:
            referencedTableSchemaName: team_management
            baseTableSchemaName: team_management
            baseTableName: departments_specialties
            baseColumnNames: specialties_id
            referencedTableName: specialty
            referencedColumnNames: code_name
            constraintName: fk_specialties_id_departments_id

  - changeSet:
      id: add_primary_and_foreign_keys_to_account_department_table
      author: DenysLeonenko
      changes:
        - addPrimaryKey:
            schemaName: team_management
            tableName: account_department
            columnNames: account_id, department_id
            constraintName: pk_account_id_department_id
        - addForeignKeyConstraint:
            referencedTableSchemaName: team_management
            baseTableSchemaName: team_management
            baseTableName: account_department
            baseColumnNames: department_id
            referencedTableName: department
            referencedColumnNames: id
            constraintName: fk_department_id_account_id

  - changeSet:
      id: add_primary_and_foreign_keys_to_account_specialty_table
      author: DenysLeonenko
      changes:
        - addPrimaryKey:
            schemaName: team_management
            tableName: account_specialty
            columnNames: account_id, specialty_id
            constraintName: pk_account_id_specialty_id
        - addForeignKeyConstraint:
            referencedTableSchemaName: team_management
            baseTableSchemaName: team_management
            baseTableName: account_specialty
            baseColumnNames: specialty_id
            referencedTableName: specialty
            referencedColumnNames: code_name
            constraintName: fk_specialty_id_account_id
